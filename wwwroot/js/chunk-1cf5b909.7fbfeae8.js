(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1cf5b909"],{"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"25f0":function(t,e,a){"use strict";var i=a("6eeb"),n=a("825a"),o=a("d039"),l=a("ad6d"),r="toString",s=RegExp.prototype,d=s[r],c=o((function(){return"/a/b"!=d.call({source:"a",flags:"b"})})),u=d.name!=r;(c||u)&&i(RegExp.prototype,r,(function(){var t=n(this),e=String(t.source),a=t.flags,i=String(void 0===a&&t instanceof RegExp&&!("flags"in s)?l.call(t):a);return"/"+e+"/"+i}),{unsafe:!0})},2942:function(t,e,a){"use strict";var i=a("b775");e["a"]={postQuery:function(t){return Object(i["a"])({url:"/cooperation/cooperationability/GetPage",method:"post",data:t})},saveAudit:function(t){return Object(i["a"])({url:"/cooperation/cooperationability/saveAudit",method:"post",data:t})},goBackAuit:function(t){return Object(i["a"])({url:"/cooperation/cooperationability/goBackAuit",method:"post",data:t})},getCbListByid:function(t){return Object(i["a"])({url:"/cooperation/cooperationability/GetCBListByID",method:"get",params:{id:t}})},GetSelectListByID:function(t){return Object(i["a"])({url:"/cooperation/cooperationability/GetSelectListByID",method:"get",params:{label:t}})},insertCooperabilityOtherDept:function(){return Object(i["a"])({url:"/cooperation/cooperationability/insertCooperabilityOtherDept",method:"post"})}}},"5e1c":function(t,e,a){"use strict";var i=a("8c22"),n=a.n(i);n.a},"6b50":function(t,e,a){"use strict";var i=a("7481"),n=a.n(i);n.a},7481:function(t,e,a){},"7db0":function(t,e,a){"use strict";var i=a("23e7"),n=a("b727").find,o=a("44d2"),l=a("ae40"),r="find",s=!0,d=l(r);r in[]&&Array(1)[r]((function(){s=!1})),i({target:"Array",proto:!0,forced:s||!d},{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),o(r)},"841c":function(t,e,a){"use strict";var i=a("d784"),n=a("825a"),o=a("1d80"),l=a("129f"),r=a("14c3");i("search",1,(function(t,e,a){return[function(e){var a=o(this),i=void 0==e?void 0:e[t];return void 0!==i?i.call(e,a):new RegExp(e)[t](String(a))},function(t){var i=a(e,t,this);if(i.done)return i.value;var o=n(t),s=String(this),d=o.lastIndex;l(d,0)||(o.lastIndex=0);var c=r(o,s);return l(o.lastIndex,d)||(o.lastIndex=d),null===c?-1:c.index}]}))},"8c22":function(t,e,a){},b64b:function(t,e,a){var i=a("23e7"),n=a("7b0b"),o=a("df75"),l=a("d039"),r=l((function(){o(1)}));i({target:"Object",stat:!0,forced:r},{keys:function(t){return o(n(t))}})},baa5:function(t,e,a){var i=a("23e7"),n=a("e58c");i({target:"Array",proto:!0,forced:n!==[].lastIndexOf},{lastIndexOf:n})},e58c:function(t,e,a){"use strict";var i=a("fc6a"),n=a("a691"),o=a("50c4"),l=a("a640"),r=a("ae40"),s=Math.min,d=[].lastIndexOf,c=!!d&&1/[1].lastIndexOf(1,-0)<0,u=l("lastIndexOf"),g=r("indexOf",{ACCESSORS:!0,1:0}),p=c||!u||!g;t.exports=p?function(t){if(c)return d.apply(this,arguments)||0;var e=i(this),a=o(e.length),l=a-1;for(arguments.length>1&&(l=s(l,n(arguments[1]))),l<0&&(l=a+l);l>=0;l--)if(l in e&&e[l]===t)return l||0;return-1}:d},f127:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"plan"},[a("el-row",{staticClass:"page-tools"},[a("el-col",{attrs:{span:8}},[a("div",[a("el-select",{staticStyle:{"padding-right":"5px"},attrs:{size:"mini",placeholder:"合同状态"},on:{change:t.batchSelectChange},model:{value:t.batchEdit.ContractState,callback:function(e){t.$set(t.batchEdit,"ContractState",e)},expression:"batchEdit.ContractState"}},[a("el-option",{attrs:{label:"初审中",value:"初审中"}}),a("el-option",{attrs:{label:"已完成",value:"已完成"}}),a("el-option",{attrs:{label:"执行中",value:"执行中"}}),a("el-option",{attrs:{label:"签定中",value:"签定中"}}),a("el-option",{attrs:{label:"已取消",value:"已取消"}})],1),a("el-button",{attrs:{type:"success",size:"mini",loading:t.submitEventLoading},on:{click:t.submitEvent}},[t._v("保存")]),a("span",{staticStyle:{"font-size":"13px",color:"grey","margin-left":"15px"}},[t._v("主制厂："+t._s(t.mainplant))])],1)]),a("el-col",{attrs:{span:10}},[a("div",{staticStyle:{width:"100px"}},[a("el-select",{attrs:{placeholder:"请选择",size:"mini"},on:{change:t.staChange},model:{value:t.materSta,callback:function(e){t.materSta=e},expression:"materSta"}},t._l(t.materStaData,(function(t){return a("el-option",{key:t.ID,attrs:{label:t.LABEL,value:t.ID}})})),1)],1)]),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[a("el-button-group",[a("el-button",{attrs:{size:"mini"},on:{click:t.exportCsvEvent}},[t._v(" Excel "),a("i",{staticClass:"el-icon-download"})]),a("el-button",{attrs:{size:"mini"}},[a("i",{staticClass:"el-icon-search"})]),a("el-button",{attrs:{size:"mini"},on:{click:t.fetchData}},[a("i",{staticClass:"el-icon-refresh"})]),a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.toggleMainSelection(t.tableData.data)}}},[t._v("反选")]),a("el-checkbox",{attrs:{label:"换行",size:"mini",border:""},model:{value:t.isLineWarp,callback:function(e){t.isLineWarp=e},expression:"isLineWarp"}})],1)],1)],1),a("elx-editable",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"elxEditable",staticStyle:{width:"100%"},attrs:{config:{render:"scroll"},data:t.tableData.data,height:t.tableHeight,"edit-config":{trigger:"dblclick",mode:"cell"},"tooltip-effect":"dark",border:"","highlight-current-row":""},on:{"cell-dblclick":t.RowDialogEvent,"update:data":function(e){return t.$set(t.tableData,"data",e)},"sort-change":t.tableSortChange,"selection-change":t.mainSelectionChange}},[a("elx-editable-column",{attrs:{type:"selection",width:"35"}}),t._l(t.listQuery.ColumnHeader,(function(e,i){return[e.iseditable?a("elx-editable-column",{key:e.field,attrs:{prop:e.field,"min-width":e.width,fixed:e.isfixed,sortable:"custom","show-overflow-tooltip":!t.isLineWarp,"edit-render":t.editRender(e.field)},scopedSlots:t._u([{key:"default",fn:function(i){return"CONTRACTSTATE"==e.field?["初审中"==i.row.CONTRACTSTATE?a("el-tag",{attrs:{type:"warning",effect:"dark"}},[t._v(t._s(i.row.CONTRACTSTATE))]):t._e(),"已完成"==i.row.CONTRACTSTATE?a("el-tag",{attrs:{type:"success",effect:"dark"}},[t._v(t._s(i.row.CONTRACTSTATE))]):t._e(),"执行中"==i.row.CONTRACTSTATE?a("el-tag",{attrs:{type:"",effect:"dark"}},[t._v(t._s(i.row.CONTRACTSTATE))]):t._e(),"签定中"==i.row.CONTRACTSTATE?a("el-tag",{attrs:{type:"info",effect:"dark"}},[t._v(t._s(i.row.CONTRACTSTATE))]):t._e()]:void 0}}],null,!0)},[a("template",{slot:"header"},[a("input",{attrs:{placeholder:e.title},on:{input:function(e){return t.changeInput(e,i)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.changeSearch(e,i)},click:function(t){t.stopPropagation()}}})])],2):a("elx-editable-column",{key:e.field,attrs:{prop:e.field,"min-width":e.width,fixed:e.isfixed,sortable:"custom","show-overflow-tooltip":!t.isLineWarp},scopedSlots:t._u([{key:"default",fn:function(i){return"ORDERNO"==e.field?[a("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.dataDetailClick(i.row.ORDERNO)}}},[t._v(t._s(i.row[e.field]))])]:void 0}}],null,!0)},[a("template",{slot:"header"},[a("input",{attrs:{placeholder:e.title},on:{input:function(e){return t.changeInput(e,i)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetchData(e)},click:function(t){t.stopPropagation()}}})])],2)]}))],2),a("el-row",{staticClass:"table-footer"},[a("el-pagination",{attrs:{background:"","current-page":t.listQuery.currentPage,"page-size":t.listQuery.pageSize,"page-sizes":[50,100,200,500,1e3],layout:"sizes,prev, pager, next,total",total:t.tableData.total},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange,"update:currentPage":function(e){return t.$set(t.listQuery,"currentPage",e)},"update:current-page":function(e){return t.$set(t.listQuery,"currentPage",e)}}})],1),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{visible:t.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-row",{staticStyle:{padding:"5px"}},[a("el-col",{attrs:{span:8}},[t._v("工单号："+t._s(t.dialogData.row.ORDERNO))]),a("el-col",{attrs:{span:8}},[t._v("工号："+t._s(t.dialogData.row.WORKNO))]),a("el-col",{attrs:{span:8}},[t._v("图号："+t._s(t.dialogData.row.ITEMNO))])],1),a("el-row",{staticStyle:{padding:"5px"}},[a("el-col",{attrs:{span:8}},[a("div",{staticStyle:{"text-align":"left"}},[t._v(" 名称："+t._s(t.dialogData.row.ITEMNAME)+" ")])]),a("el-col",{attrs:{span:8}},[a("div",{staticStyle:{"text-align":"left"}},[t._v("材质："+t._s(t.dialogData.row.TEXTURE))])]),a("el-col",{attrs:{span:8}},[t._v(" 外协厂： "),a("el-select",{staticStyle:{width:"160px"},attrs:{size:"mini",placeholder:"外协厂家",filterable:""},on:{change:t.GetSupplierName},model:{value:t.dialogData.Select1Value,callback:function(e){t.$set(t.dialogData,"Select1Value",e)},expression:"dialogData.Select1Value"}},t._l(t.Select1Items,(function(t){return a("el-option",{key:t.ID,attrs:{label:t.NAME,value:t.ID}})})),1)],1)],1),a("el-row",[a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.toggleSelection(t.dialogData.data)}}},[t._v("反选")])],1),a("el-col",{attrs:{span:18}},[t._v(" 数量： "),a("el-input-number",{attrs:{size:"mini",min:1,max:t.dialogData.inputMax,label:"数量"},model:{value:t.dialogData.inputNum,callback:function(e){t.$set(t.dialogData,"inputNum",e)},expression:"dialogData.inputNum"}}),a("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini",placeholder:""},on:{change:t.handleTypeSelectionChange},model:{value:t.dialogData.Select2Value,callback:function(e){t.$set(t.dialogData,"Select2Value",e)},expression:"dialogData.Select2Value"}},t._l(t.Select2Items,(function(t){return a("el-option",{key:t.ID,attrs:{label:t.VALUE,value:t.ID}})})),1),a("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini",placeholder:"计划价"},model:{value:t.dialogData.Select3Value,callback:function(e){t.$set(t.dialogData,"Select3Value",e)},expression:"dialogData.Select3Value"}},t._l(t.Select3Items,(function(t){return a("el-option",{key:t.ID,attrs:{label:t.KEYED_NAME,value:t.ID}})})),1)],1),a("el-col",{attrs:{span:3}},[null==t.dialogData.row.CONFIRMPERSON?[a("el-button",{attrs:{size:"mini",type:"primary",loading:t.btnSavaLoading},on:{click:t.saveAudit}},[t._v("保 存")])]:[a("el-button",{attrs:{size:"mini",type:"warning",loading:t.btnSavaLoading},on:{click:t.saveAudit}},[t._v("修 改")])]],2)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dialogLoading,expression:"dialogLoading"}],ref:"refDialogTable",attrs:{data:t.dialogData.data,border:""},on:{"row-click":t.clickRow,"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",selectable:t.checkSelectable,width:"35"}}),a("el-table-column",{attrs:{property:"rowNo",label:"序号",width:"150"}}),a("el-table-column",{attrs:{property:"processName",label:"工序名",width:"200"}}),a("el-table-column",{attrs:{property:"processSpan",label:"工时"}}),a("el-table-column",{attrs:{property:"tag",label:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"font-size":"16px",color:"#67C23A"}},[t._v(t._s(e.row.tag))])]}}])})],1)],1),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{"close-on-click-modal":!1}},[a("el-row",{staticStyle:{padding:"5px"}},[a("el-col",{attrs:{span:8}},[t._v("工单号："+t._s(t.dialogOtherDate.row.ORDERNO))]),a("el-col",{attrs:{span:8}},[t._v("工号："+t._s(t.dialogOtherDate.row.WORKNO))]),a("el-col",{attrs:{span:8}},[t._v("图号："+t._s(t.dialogOtherDate.row.ITEMNO))])],1),a("el-row",{staticStyle:{padding:"5px"}},[a("el-col",{staticStyle:{"text-align":"center","font-size":"15px"},attrs:{span:24}},[t._v(t._s(t.dialogOtherDate.dateType))])],1),a("el-row",[a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:24}},[a("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"选择日期","value-format":"yyyy/MM/dd"},model:{value:t.dialogOtherDate.selectOtherDate,callback:function(e){t.$set(t.dialogOtherDate,"selectOtherDate",e)},expression:"dialogOtherDate.selectOtherDate"}})],1),a("el-col",{attrs:{span:8}})],1)],1),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{visible:t.dialogMiddledateVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogMiddledateVisible=e}}},[a("el-row",{staticStyle:{padding:"5px"}},[a("el-col",{attrs:{span:8}},[t._v("工单号："+t._s(t.dialogMiddleDate.row.ORDERNO))]),a("el-col",{attrs:{span:8}},[t._v("工号："+t._s(t.dialogMiddleDate.row.WORKNO))]),a("el-col",{attrs:{span:8}},[t._v("图号："+t._s(t.dialogMiddleDate.row.ITEMNO))])],1),a("el-row",{staticStyle:{padding:"5px"}},[a("el-col",{staticStyle:{"text-align":"center","font-size":"20px",color:"#000000"},attrs:{span:24}},[t._v(t._s(t.dialogMiddleDate.dateType))])],1),a("el-row",[a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:2}},[t._v("时间 :")]),a("el-col",{attrs:{span:4}},[a("el-date-picker",{attrs:{size:"mini",type:"date",text:"日期",format:"yyyy/MM/dd","width:80":"",placeholder:"选择日期","value-format":"yyyy/MM/dd"},model:{value:t.dialogMiddleDate.selectDate,callback:function(e){t.$set(t.dialogMiddleDate,"selectDate",e)},expression:"dialogMiddleDate.selectDate"}})],1),a("el-col",{staticStyle:{"text-align":"left"},attrs:{span:2}},[t._v("说明：")]),a("el-col",{attrs:{span:6}},[a("el-select",{staticStyle:{width:"100px"},attrs:{size:"mini",text:"说明",placeholder:"返厂原因"},model:{value:t.dialogMiddleDate.returnReson,callback:function(e){t.$set(t.dialogMiddleDate,"returnReson",e)},expression:"dialogMiddleDate.returnReson"}},t._l(t.Select4Items,(function(t){return a("el-option",{key:t.ID,attrs:{label:t.LABEL,value:t.ID}})})),1)],1),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{size:"mini",clearable:"",placeholder:"返厂货位信息"},model:{value:t.dialogMiddleDate.CommentValue,callback:function(e){t.$set(t.dialogMiddleDate,"CommentValue",e)},expression:"dialogMiddleDate.CommentValue"}})],1),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary",size:"mini",loading:t.btnSavaLoading},on:{click:t.insertMiddleInfo}},[t._v("保 存")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dialogLoading,expression:"dialogLoading"}],ref:"elxTable1",attrs:{data:t.dialogMiddleDate.data,border:""},on:{"update:data":function(e){return t.$set(t.dialogMiddleDate,"data",e)}}},[a("el-table-column",{attrs:{type:"selection",width:"35"}}),a("el-table-column",{attrs:{property:"ROWNUM",label:"序号",width:"60"}}),t._e(),a("el-table-column",{attrs:{property:"RETURNDATE",label:"返厂日期",width:"100"}}),a("el-table-column",{attrs:{property:"RETURNTEXT",label:"返厂原因",width:"100"}}),a("el-table-column",{attrs:{property:"LOCATION",label:"返厂货位"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary",loading:t.btnSavaLoading},on:{click:function(a){return t.editMiddle(e.row,e.$index)}}},[t._v("编 辑")]),a("el-button",{attrs:{size:"mini",type:"primary",loading:t.btnSavaLoading},on:{click:function(a){return t.removeMiddle(e.row,e.$index)}}},[t._v("删 除")])]}}])}),t._v("> ")],1)],1),a("el-popover",{attrs:{placement:"top"}})],1)},n=[],o=(a("99af"),a("7db0"),a("4160"),a("c975"),a("baa5"),a("a434"),a("b64b"),a("d3b7"),a("ac1f"),a("25f0"),a("5319"),a("841c"),a("159b"),a("96cf"),a("1da1")),l=a("b775"),r={postQuery:function(t){return Object(l["a"])({url:"/Cooperation/CooperationabilityOrder/GetPage",method:"post",data:t})},getContractState:function(){return Object(l["a"])({url:"/Cooperation/CooperationabilityOrder/getContractState",method:"post"})},GetSupplier:function(){return Object(l["a"])({url:"/Cooperation/CooperationabilityOrder/GetSupplier",method:"post"})},saveAudit:function(t){return Object(l["a"])({url:"/Cooperation/CooperationabilityOrder/saveAudit",method:"post",data:t})},saveAuditDateArr:function(t){return Object(l["a"])({url:"/Cooperation/CooperationabilityOrder/saveAuditDateArr",method:"post",data:t})},goBackAuit:function(t){return Object(l["a"])({url:"/outsource/OutsourcePlan/goBackAuit",method:"post",data:t})},getCbListByid:function(t){return Object(l["a"])({url:"/outsource/OutsourcePlan/GetCBListByID",method:"get",params:{id:t}})},GetSelectListByID:function(t){return Object(l["a"])({url:"/cooperation/cooperationability/GetSelectListByID",method:"get",params:{label:t}})},GetListByID:function(t){return Object(l["a"])({url:"/Cooperation/CooperationabilityOrder/GetListByID",method:"get",params:{id:t}})},GetPlanOrderType:function(){return Object(l["a"])({url:"/Cooperation/CooperationabilityOrder/GetPlanOrderType",method:"get"})},insertMiddleInfo:function(t){return Object(l["a"])({url:"/Cooperation/CooperationabilityOrder/insertMiddleInfo",method:"post",data:t})},getRouteFromWSRByID:function(t){return Object(l["a"])({url:"/Cooperation/CooperationabilityOrder/getRouteFromWSRByID",method:"get",params:{id:t}})},getMiddleList:function(t){return Object(l["a"])({url:"/Cooperation/CooperationabilityOrder/getMiddleList",method:"get",params:{id:t}})},getReturnType:function(){return Object(l["a"])({url:"/Cooperation/CooperationabilityOrder/getReturnType",method:"get"})},getMaterStaData:function(){return Object(l["a"])({url:"/Cooperation/CooperationabilityOrder/getMaterStaData",method:"get"})},removeMiddleInfo:function(t){return Object(l["a"])({url:"/Cooperation/CooperationabilityOrder/removeMiddleReturnByID",method:"get",params:{id:t}})}},s=a("2942"),d={data:function(){return{isDataChange:!0,tableHeight:window.innerHeight-182,multipleSelection:[],submitEventLoading:!1,materSta:"",materStaData:[],mainSelection:[],batchEdit:{ContractState:""},tableData:{data:null,total:0},isLineWarp:!1,isEditable:!0,listLoading:!0,dialogLoading:!0,listQuery:{pageSize:50,currentPage:1,ext:"全部",ColumnHeader:[],mateSta:"35C108049D694647A1C7B7BB7FE2247F"},dialogVisible:!1,btnSavaLoading:!1,dataTimeValue:"",dialogData:{row:{},data:[],Select1Value:"",Select2Value:"",Select3Value:"",SupplierName:"",Orderno:"",inputNum:0,inputMax:0},dialogMiddledateVisible:!1,dialogMiddleDate:{row:{},data:[],selectDate:"",dateType:"",returnReson:"",ResonText:"",CommentValue:"",MainPlant:""},otherDateVisible:!1,dialogOtherDate:{row:{},selectOtherDate:"",dateType:""},Select1Items:{},Select2Items:{},Select3Items:{},Select4Items:{},SelectContractState:{},mainplant:""}},created:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.getContractState();case 2:a=e.sent,i=[],a.data.forEach((function(t){i.push({label:t.LABEL,value:t.LABEL})})),t.SelectContractState=i,r.getMaterStaData().then((function(e){t.materStaData=e.data,t.materSta="35C108049D694647A1C7B7BB7FE2247F"})),t.fetchData();case 8:case"end":return e.stop()}}),e)})))()},mounted:function(){var t=this;window.onresize=function(){t.tableHeight=window.innerHeight-182},window.onbeforeunload=function(e){e=e||window.event;var a=t.$refs.elxEditable.getAllRecords(),i=a.updateRecords;if(e&&i.length&&t.isDataChange&&(e.returnValue="修改内容未保存"),i.length&&t.isDataChange)return"修改内容未保存"},r.GetSupplier().then((function(e){t.Select1Items=e.data})),r.GetPlanOrderType().then((function(e){t.Select2Items=e.data})),s["a"].GetSelectListByID("核算类型").then((function(e){t.Select3Items=e.data})),r.getReturnType().then((function(e){t.Select4Items=e.data}))},computed:{},methods:{tableSortChange:function(t,e,a){this.listQuery.ColumnHeader.forEach((function(e){e.field==t.prop?e.order="descending"===t.order?"desc":"asc":e.order=""})),this.fetchData()},changeInput:function(t,e){this.listQuery.ColumnHeader[e].search=t.target.value},clearInput:function(t,e){this.listQuery.ColumnHeader[e].search="",t.stopPropagation(),this.fetchData()},changeSearch:function(t,e){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return void 0!==t.target.value?a.listQuery.ColumnHeader[e].search=t.target.value:a.listQuery.ColumnHeader[e].search="",i.next=3,a.fetchData();case 3:case"end":return i.stop()}}),i)})))()},dataDetailClick:function(t){window.open("http://10.17.10.202:83/wo.aspx?wo="+t,"_blank")},fetchData:function(){var t=this;this.listLoading=!0,r.postQuery(this.listQuery).then((function(e){t.tableData.data=e.data,t.tableData.total=e.total,t.mainplant=e.ext,0==Object.keys(t.listQuery.ColumnHeader).length&&(t.listQuery.ColumnHeader=e.columns),t.listLoading=!1}))},handleSizeChange:function(t){this.listQuery.pageSize=t,this.fetchData()},handleCurrentChange:function(t){this.listQuery.currentPage=t,this.fetchData()},batchSelectChange:function(t){var e=this;this.mainSelection.forEach((function(a){var i=e.tableData.data.indexOf(a);e.$set(e.tableData.data[i],"CONTRACTSTATE",t)}))},toggleMainSelection:function(t){var e=this;t?t.forEach((function(t){e.$refs.elxEditable.toggleRowSelection(t)})):this.$refs.elxEditable.clearSelection()},toggleSelection:function(t){var e=this;t?t.forEach((function(t){e.$refs.refDialogTable.toggleRowSelection(t)})):this.$refs.refDialogTable.clearSelection()},submitEvent:function(){var t=this,e=this.$refs.elxEditable.getAllRecords(),a=e.updateRecords;a.length?this.$confirm("确定要保存"+a.length+"条记录吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.submitEventLoading=!0,r.saveAuditDateArr(a).then((function(e){t.$message.success("保存成功！"),t.isDataChange=!1,t.batchEdit.ContractState=""})).catch((function(){t.submitEventLoading=!1,t.$message.error("出错了")})),t.submitEventLoading=!1})):this.$message.info("没有修改的数据。")},checkSelectable:function(){return"PLAN"!=this.dialogData.Select2Value},RowDialogEvent:function(t,e){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:i.t0=e.property,i.next="COOPERATIONPROCESS"===i.t0?3:"RETURNDATE"===i.t0?16:23;break;case 3:return a.dialogVisible=!0,a.dialogData.row=t,a.dialogData.data=[],a.dialogData.inputMax=t.QUANTITY,a.dialogData.inputNum=t.QUANTITY,a.dialogData.Orderno=t.ORDERNO,a.dialogData.Select1Value=a.dialogData.row.SUPPLIERID,a.dialogData.SupplierName=a.dialogData.row.SUPPLIER,a.dialogLoading=!0,a.dialogData.Select2Value=a.dialogData.row.PLANTYPE,a.dialogData.Select3Value=a.dialogData.row.COSTTYPEID,"PLAN"==t.PLANTYPE?r.GetListByID(t.ID).then((function(t){for(var e=t.data,i=0;i<e.length;i++){var n={rowNo:e[i].SEQ_NO,processName:e[i].MACHINE,processSpan:e[i].TIME_SETUP+"/"+e[i].TIME_RUN};a.dialogData.data.push(n)}a.dialogLoading=!1,a.toggleSelection(a.dialogData.data)})):r.getRouteFromWSRByID(t.ID).then((function(t){var e=t.data;if(0==e.length)return a.$message.error(" 此工单已完成， 不能操作 ！"),a.dialogData.data=[],void(a.dialogLoading=!1);for(var i=0;i<e.length;i++){var n={rowNo:e[i].SEQUENCENUM,processName:e[i].EQUIP,processSpan:e[i].PROCESSTIME};a.dialogData.data.push(n)}a.dialogLoading=!1})),i.abrupt("break",24);case 16:return a.dialogMiddleDate.row=t,a.dialogMiddledateVisible=!0,a.dialogMiddleDate.dateType="中途返厂",a.dialogMiddleDate.data=[],r.getMiddleList(t.ID).then((function(t){for(var e=t.data,i=0;i<e.length;i++){var n={ROWNUM:e[i].ROWNUM,ID:e[i].ID,RETURNDATE:e[i].RETURNDATE,RETURNTEXT:e[i].RETURNTEXT,LOCATION:e[i].LOCATION};a.dialogMiddleDate.data.push(n)}})),a.dialogLoading=!1,i.abrupt("break",24);case 23:return i.abrupt("break",24);case 24:case"end":return i.stop()}}),i)})))()},handleSelectionChange:function(t){this.multipleSelection=t},handleTypeSelectionChange:function(t){var e=this;this.dialogData.data=[],"PLAN"==t?r.GetListByID(this.dialogData.row.ID).then((function(t){for(var a=t.data,i=0;i<a.length;i++){var n={rowNo:a[i].SEQ_NO,processName:a[i].MACHINE,processSpan:a[i].TIME_SETUP+"/"+a[i].TIME_RUN,tag:"已审"};e.dialogData.data.push(n)}e.dialogLoading=!1,e.toggleSelection(e.dialogData.data)})):r.getRouteFromWSRByID(this.dialogData.row.ID).then((function(t){var a=t.data;if(0==a.length)return e.$message.error(" 此工单已完成， 不能操作 ！"),e.dialogData.data=[],void(e.dialogLoading=!1);for(var i=0;i<a.length;i++){var n={rowNo:a[i].SEQUENCENUM,processName:a[i].EQUIP,processSpan:a[i].PROCESSTIME,tag:""};e.dialogLoading=!1,e.dialogData.data.push(n)}}))},cellStyle:function(t){var e=t.row,a=(t.column,t.rowIndex,t.columnIndex);return"初审中"==e.CONTRACTSTATE&&2==a?"bgcolor-yellow":"已完成"==e.CONTRACTSTATE&&2==a?"bgcolor-green":"执行中"==e.CONTRACTSTATE&&2==a?"bgcolor-red":"签定中"==e.CONTRACTSTATE&&2==a?"bgcolor-gray":void 0},GetSupplierName:function(t){var e={};e=this.Select1Items.find((function(e){return e.ID===t})),this.dialogData.SupplierName=e.NAME},mainSelectionChange:function(t){this.mainSelection=t},saveAudit:function(){var t=this;if(""!=this.dialogData.Select1Value&&""!=this.dialogData.Select2Value&&""!=this.dialogData.Select3Value){this.btnSavaLoading=!0;var e={id:this.dialogData.row.ID,rows:this.multipleSelection,quantity:this.dialogData.inputNum,select1:this.dialogData.SupplierName,select2:this.dialogData.Select2Value,select3:this.dialogData.Select3Value,orderno:this.dialogData.Orderno};r.saveAudit(e).then((function(e){t.btnSavaLoading=!1,t.dialogVisible=!1;var a=t.tableData.data.indexOf(t.dialogData.row);t.tableData.data[a].COOPERATIONPROCESS=e.data,t.tableData.data[a].PLANTYPE=t.dialogData.Select2Value,t.tableData.data[a].SUPPLIER=t.dialogData.SupplierName})).catch((function(e){t.$message.error("保存失败"+e.msg),t.btnSavaLoading=!1}))}else this.$message.warning("请选择必要的信息！")},saveOtherDate:function(){var t=this;if(""!=this.dialogOtherDate.selectOtherDate){var e={id:this.dialogOtherDate.row.ID,selectDate:this.dialogOtherDate.selectOtherDate,dateType:this.dialogOtherDate.dateType};r.saveAuditDate(e).then((function(e){t.otherDateVisible=!1;var a=t.tableData.data.indexOf(t.dialogOtherDate.row);switch(t.dialogOtherDate.dateType){case"ORDER_LEAVETIME":t.tableData.data[a].ORDER_LEAVETIME=e.data;break;case"PART_LEAVETIME":t.tableData.data[a].PART_LEAVETIME=e.data;break;case"ORDER_ACCEPTDATE":t.tableData.data[a].ORDER_ACCEPTDATE=e.data;break;case"DRAWING_LEAVE":t.tableData.data[a].DRAWING_LEAVE=e.data;break;case"FINISH_DATE":t.tableData.data[a].FINISH_DATE=e.data;break}t.dialogOtherDate.selectOtherDate="",t.otherDateVisible=!1})).catch((function(e){t.$message.error("保存失败"+e.msg),t.btnSavaLoading=!1}))}else this.$message.warning("请选择必要的信息！")},saveDateNew:function(t,e){var a={id:t.row.ID,dateType:e,selectDate:t.row[e]};r.saveAuditDate(a)},insertMiddleInfo:function(){var t=this;if(""!=this.dialogMiddleDate.selectDate&&""!=this.dialogMiddleDate.returnReson){this.btnSavaLoading=!0;var e={id:this.dialogMiddleDate.row.ID,date:this.dialogMiddleDate.selectDate,reson:this.dialogMiddleDate.returnReson,comment:this.dialogMiddleDate.CommentValue};r.insertMiddleInfo(e).then((function(e){var a=t.tableData.data.indexOf(t.dialogMiddleDate.row);console.log(t.dialogMiddleDate.selectDate),t.tableData.data[a].RETURNDATE=t.dialogMiddleDate.selectDate,t.tableData.data[a].LOCATION=t.dialogMiddleDate.CommentValue})),this.btnSavaLoading=!1,this.dialogMiddledateVisible=!1}else this.$message.warning("Warning  :请选择必要的信息！")},editRender:function(t){switch(t){case"CONTRACTSTATE":return{name:"ElSelect",options:this.SelectContractState};case"WORKBLANK":return{type:"default"};default:return{name:"ElDatePicker",props:{type:"date",format:"yyyy/MM/dd"}}}},editMiddle:function(){this.$message.warning("无权操作！")},removeMiddle:function(t,e){var a=this;this.$confirm("将删除这条记录 ! 继续吗 ? ","提示",{confirmButtonText:"取 消",cancelButtonText:"删 除",type:"warning"}).then((function(){})).catch((function(){var i=t.ID;r.removeMiddleInfo(i).then((function(t){t.code&&a.dialogMiddleDate.data.splice(e,1)}))}))},clickRow:function(t){this.$refs.refDialogTable.toggleRowSelection(t)},exportCsvEvent:function(){var t="[{";this.listQuery.ColumnHeader.forEach((function(e){t+='"'+e.field+'":"'+e.title+'",'})),t=t.substring(0,t.lastIndexOf(",")),t+="}]";for(var e=JSON.parse(t),a=JSON.stringify(this.tableData.data),i=JSON.parse(a),n=e.concat(i),o=0,l=n.length;o<l;o++)for(var r in n[o]){var s=n[o][r];null!=s&&-1!=s.toString().indexOf(",")&&(n[o][r]=n[o][r].replace(/,/g,"，")),null!=s&&-1!=s.toString().indexOf("\r\n")&&(n[o][r]=n[o][r].replace(/[\r\n]/g,""))}this.$refs.elxEditable.exportCsv({filename:"Table",data:n,original:!0})},dateFormat:function(t,e){var a=t[e.property];if(null==a)return"";var i=new Date(a);return console.log(i),i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate()+" "+i.getHours()+":"+i.getMinutes()+":"+i.getSeconds()+"."+i.getMilliseconds()},showPop:function(t,e){this.dialogOtherDate.row=t,this.dialogOtherDate.dateType=e.field,this.dialogOtherDate.selectOtherDate=t[e.field]},staChange:function(t){this.listQuery.mateSta=t,this.fetchData()}}},c=d,u=(a("5e1c"),a("6b50"),a("2877")),g=Object(u["a"])(c,i,n,!1,null,"63f5c2b8",null);e["default"]=g.exports}}]);