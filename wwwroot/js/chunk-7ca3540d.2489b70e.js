(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ca3540d"],{"0f37":function(t,e,a){"use strict";var n=a("b775");e["a"]={getPage:function(t){return Object(n["a"])({url:"/Enum/getPage",method:"post",data:t})},getDel:function(t){return Object(n["a"])({url:"/Enum/getDel",method:"get",params:{id:t}})},GetAllEnum:function(){return Object(n["a"])({url:"/Enum/GetAllEnum",method:"get"})},postAddObject:function(t){return Object(n["a"])({url:"/Enum/AddObject",method:"post",data:t})},postEditObject:function(t){return Object(n["a"])({url:"/Enum/EditObject",method:"post",data:t})},getEnumInfo:function(t){return Object(n["a"])({url:"/Enum/GetEnumInfo",method:"get",params:{name:t}})},postAddObjectProp:function(t){return Object(n["a"])({url:"/EnumData/AddObject",method:"post",data:t})},postEditObjectProp:function(t){return Object(n["a"])({url:"/EnumData/EditObject",method:"post",data:t})},postEditObjectPropArr:function(t){return Object(n["a"])({url:"/EnumData/EditObjectArr",method:"post",data:t})},getDelObjectProp:function(t){return Object(n["a"])({url:"/EnumData/getDel",method:"get",params:{id:t}})},getPropInfo:function(t){return Object(n["a"])({url:"/EnumData/GetInfo",method:"get",params:{id:t}})},GetEnumDataList:function(t){return Object(n["a"])({url:"/EnumData/GetEnumDataList",method:"get",params:{enumname:t}})}}},4976:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{staticClass:"page-tools"},[a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{size:"small",placeholder:"请选择待管理的角色"},on:{change:t.SelectChange},model:{value:t.roleid,callback:function(e){t.roleid=e},expression:"roleid"}},t._l(t.userlevel,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.id))]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"12px"}},[t._v(t._s(e.name))])])})),1)],1),a("el-col",{attrs:{span:16}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.openAddDialog}},[t._v("复制其他角色")]),a("el-button",{attrs:{type:"success",size:"mini",loading:t.btnSavaLoading},on:{click:t.SaveCommit}},[t._v("存盘修改")])],1),a("el-col",{attrs:{span:4}})],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{staticStyle:{padding:"20px"},attrs:{span:8}},[a("el-card",{attrs:{shadow:"always"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("角色菜单")])]),a("el-tree",{ref:"tree",attrs:{data:t.orgtree.data,"show-checkbox":"","default-expand-all":"","node-key":"id","highlight-current":"",props:t.orgtree.defaultProps,"expand-on-click-node":!1},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.node,r=e.data;return a("span",{staticClass:"custom-tree-node"},[a("span",[t._v(t._s(n.label))]),a("span",[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return t.appendDashboard(r.id)}}},[t._v(" 添加到看板 ")])],1)])}}])})],1)],1),a("el-col",{staticStyle:{padding:"20px 20px 20px 0px"},attrs:{span:16}},[a("el-card",{attrs:{shadow:"always"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("角色看板")])]),t._l(t.dashBoardList,(function(e){return a("div",{key:e.id,staticClass:"item"},[a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticStyle:{float:"right"}},[a("el-button",{staticClass:"el-icon-close",attrs:{type:"text"},on:{click:function(a){return t.delFromDashboard(e.id)}}})],1),a("a",{attrs:{target:"_blank",href:e.url}},[a("i",{class:e.icon,staticStyle:{"font-size":"40px",padding:"15px"}}),a("br"),t._v(t._s(e.title)+" ")])])],1)}))],2)],1)],1)],1)},r=[],o=(a("96cf"),a("1da1")),s=a("5941"),i=a("b775"),u={GetRoleMenuIdArr:function(t){return Object(i["a"])({url:"/MenuRole/GetRoleMenuIdArr",method:"get",params:{id:t}})},SaveByMenuIdArr:function(t){return Object(i["a"])({url:"/MenuRole/SaveByMenuIdArr",method:"post",data:t})},getDashboardList:function(t){return Object(i["a"])({url:"/MenuRole/getDashboardList",method:"get",params:{id:t}})},delFromDashboard:function(t){return Object(i["a"])({url:"/MenuRole/delFromDashboard",method:"get",params:{id:t}})},appendDashboard:function(t,e){return Object(i["a"])({url:"/MenuRole/appendDashboard",method:"get",params:{roleid:t,menuid:e}})}},c=a("0f37"),d={data:function(){return{userlevel:[],roleid:null,orgtree:{data:[],defaultProps:{children:"lists",label:"title"}},isLineWarp:!1,listLoading:!0,dialogLoading:!0,showIconDrawer:!1,dialogVisible:!1,btnSavaLoading:!1,dashBoardList:[]}},mounted:function(){var t=this,e=this.$store.state.app.AppConfig;null==e&&this.$message.success("系统配置信息不存在，请重新登录"),c["a"].GetEnumDataList(e.userPermitEnum).then((function(e){t.userlevel=e.data}))},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.listLoading=!0,e.next=3,s["a"].GetMenuTreeList();case 3:a=e.sent,t.orgtree.data=a.data,t.listLoading=!1;case 6:case"end":return e.stop()}}),e)})))()},SaveCommit:function(){var t=this;if(!this.roleid)return this.$message.info("请先选择需要编辑的角色");this.$confirm("确定要保存修改吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.btnSavaLoading=!0;var e=t.$refs.tree.getCheckedKeys(),a={roleid:t.roleid,keys:e};u.SaveByMenuIdArr(a).then((function(e){t.$message.success(e.msg),t.btnSavaLoading=!1})).catch((function(e){t.$message.error("删除失败"+e.msg),t.btnSavaLoading=!1}))}))},openAddDialog:function(){if(!this.roleid)return this.$message.info("请先选择需要编辑的角色");this.dialogVisible=!0,this.isPropAdd=!0},getDashboardList:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.getDashboardList(t.roleid);case 2:a=e.sent,t.dashBoardList=a.data;case 4:case"end":return e.stop()}}),e)})))()},appendDashboard:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.roleid){a.next=2;break}return a.abrupt("return",e.$message.info("请先选择需要编辑的角色"));case 2:return a.next=4,u.appendDashboard(e.roleid,t);case 4:a.sent,e.getDashboardList();case 6:case"end":return a.stop()}}),a)})))()},SelectChange:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u.GetRoleMenuIdArr(e.roleid);case 2:a=t.sent,e.$refs.tree.setCheckedKeys(a.data),e.getDashboardList();case 5:case"end":return t.stop()}}),t)})))()},delFromDashboard:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,u.delFromDashboard(t);case 2:a.sent,e.getDashboardList();case 4:case"end":return a.stop()}}),a)})))()}}},l=d,m=(a("e5a0"),a("cd4c"),a("2877")),p=Object(m["a"])(l,n,r,!1,null,"668de07a",null);e["default"]=p.exports},5941:function(t,e,a){"use strict";var n=a("b775");e["a"]={AddItem:function(t){return Object(n["a"])({url:"/Menu/AddItem",method:"post",data:t})},AddItemArr:function(t){return Object(n["a"])({url:"/Menu/AddItemArr",method:"post",data:t})},EditItem:function(t){return Object(n["a"])({url:"/Menu/EditItem",method:"post",data:t})},EditItemArr:function(t){return Object(n["a"])({url:"/Menu/EditItemArr",method:"post",data:t})},GetMenuTreeList:function(){return Object(n["a"])({url:"/Menu/GetMenuTreeList",method:"get"})},AsyncItemArr:function(){return Object(n["a"])({url:"/Menu/AsyncItemArr",method:"get"})},GetMenuById:function(t){return Object(n["a"])({url:"/Menu/GetMenuById",method:"get",params:{id:t}})}}},"9ac1":function(t,e,a){},cd4c:function(t,e,a){"use strict";var n=a("d0e8"),r=a.n(n);r.a},d0e8:function(t,e,a){},e5a0:function(t,e,a){"use strict";var n=a("9ac1"),r=a.n(n);r.a}}]);