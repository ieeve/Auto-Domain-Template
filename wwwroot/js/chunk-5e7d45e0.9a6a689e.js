(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e7d45e0"],{2405:function(e,t,n){"use strict";var r=n("b775");t["a"]={SysInstalled:function(){return Object(r["a"])({url:"/Install/SysInstalled",method:"get"})},FinishInstall:function(){return Object(r["a"])({url:"/Install/FinishInstall",method:"get"})},GetSysConfig:function(){return Object(r["a"])({url:"/Config/GetSysConfig",method:"get"})},SaveSysConfig:function(e){return Object(r["a"])({url:"/Config/SaveSysConfig",method:"post",data:e})},SaveUserConfig:function(e){return Object(r["a"])({url:"/Config/SaveUserConfig",method:"post",data:e})},InitSysData:function(){return Object(r["a"])({url:"/Install/InitSysData",method:"get"})}}},"9ed6":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login-wrap",style:{"background-color":e.AppConfig.sysHeaderBgColor}},[r("div",{attrs:{id:"particles-js"}}),r("img",{staticStyle:{position:"absolute",left:"35px",top:"15px"},attrs:{src:n("cf05")}}),r("div",{staticClass:"ms-login-sheel"},[r("div",{staticClass:"ms-login"},[r("div",{staticClass:"ms-title"},[e._v(e._s(e.AppConfig.sysName))]),r("el-form",{ref:"loginForm",staticClass:"ms-content",attrs:{model:e.loginForm,rules:e.rules,"label-width":"0px"}},[r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{attrs:{clearable:"",placeholder:"username"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{type:"password",placeholder:"password",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm(t)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),r("div",{staticClass:"login-btn"},[r("el-button",{style:{"background-color":e.AppConfig.sysHeaderBgColor,"border-color":e.AppConfig.sysHeaderBgColor,color:"#fff"},attrs:{loading:e.loading,"show-password":""},on:{click:e.submitForm}},[e._v("登录")])],1),r("div",{staticStyle:{float:"left",width:"150px",color:"#fff"}}),r("div",{staticStyle:{float:"right",width:"85px","font-size":"14px",color:"#fff"}},[r("a",{on:{click:e.creating}},[e._v("找回密码")])])],1)],1),e._m(0)])])},s=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{margin:"10px","font-size":"14px",color:"#ddd"}},[n("div",{staticStyle:{float:"left",width:"100px"}},[n("a",{attrs:{href:"http://www.acctc.com",target:"_blank",title:"acctc.com版权所有"}},[e._v("www.acctc.com")])]),n("div",{staticStyle:{float:"right",width:"235px","text-align":"right"}},[e._v("V3.1")])])}],o=(n("96cf"),n("1da1")),a=n("2405"),i=(n("d3b7"),n("e6cf"),n("bc3a")),c=n.n(i),l=n("5c96"),u=n("f121"),d=n("5f87"),f=n("6a1d"),p=c.a.create({baseURL:"http://localhost/".concat(u["a"].apiPrefix),timeout:2e4});p.interceptors.request.use((function(e){return f["a"].getToken()&&(e.headers.Authorization="Bearer "+Object(d["a"])()),e}),(function(e){Promise.reject({code:!1,msg:e.message})})),p.interceptors.response.use((function(e){if("application/ms-excel"==e.headers["content-type"])return e;var t=e.data;if("true"===t.code||!0===t.code)return t;var n=null==t.msg?t.message:t.msg;return void 0===n&&(n="未知错误"),Object(l["Message"])({message:n,showClose:!0,type:"error",duration:5e3}),Promise.reject(t)}),(function(e){var t="服务器错误！"+e.message;return void 0!=e.response&&(e.response.data.msg&&(t=e.response.data.msg),"401"==e.response.status&&(f["a"].removeToken(),self.location="/")),Object(l["Message"])({message:t,showClose:!0,type:"error",duration:5e3}),Promise.reject({code:!1,msg:t})}));var g=p,m={login:function(e,t){return g({url:"/login",method:"post",data:{username:e,password:t}})},logout:function(){return g({url:"/user/logout",method:"post"})}},h=n("5308"),v={data:function(){return{bgStyle:"",tips:"",loading:!1,loginForm:{username:"",password:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},mounted:function(){},create:function(){},computed:{AppConfig:function(){var e=this.$store.state.app.AppConfig;return null==e&&this.$store.dispatch("GetAppConfig"),e}},beforeRouteEnter:function(e,t,n){return Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].SysInstalled();case 2:t=e.sent,r=t.ext,r?n():n({path:"/install"});case 5:case"end":return e.stop()}}),e)})))()},methods:{changeBg:function(e){},creating:function(){this.$message({message:"此项功能暂不开放.",type:"success"})},login202:function(e,t){m.login(e,t).then((function(e){f["a"].setToken(e.data.token),h["a"].setUserInfo(e.data.userinfo)}))},submitForm:function(){var e=this;this.$refs.loginForm.validate((function(t){if(!t)return!1;e.loading=!0,e.$store.dispatch("Login",e.loginForm).then(Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$store.dispatch("GetUserInfo"),e.$store.dispatch("GetUserMenu"),e.$store.dispatch("GetAppConfig"),e.$router.push("/dashboard"),e.loading=!1;case 5:case"end":return t.stop()}}),t)})))).catch((function(t){e.tips=t.msg,e.loading=!1}))}))}}},b=v,w=(n("d8a8"),n("2877")),y=Object(w["a"])(b,r,s,!1,null,"b80221a6",null);t["default"]=y.exports},adfa:function(e,t,n){},d8a8:function(e,t,n){"use strict";var r=n("adfa"),s=n.n(r);s.a}}]);