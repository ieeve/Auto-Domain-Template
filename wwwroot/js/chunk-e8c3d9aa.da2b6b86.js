(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e8c3d9aa"],{"0c6f":function(e,t,a){},"45d2":function(e,t,a){"use strict";var r=a("0c6f"),i=a.n(r);i.a},8476:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"plan"},[a("el-row",{staticClass:"page-tools"},[a("el-col",{attrs:{span:20}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addDialogOpen}},[e._v("添加数据")])],1),a("el-col",{attrs:{span:4}},[a("el-button-group",[a("el-button",{attrs:{size:"mini"},on:{click:e.fetchData}},[a("i",{staticClass:"el-icon-refresh"})]),a("el-checkbox",{attrs:{label:"换行",size:"mini",border:""},model:{value:e.isLineWarp,callback:function(t){e.isLineWarp=t},expression:"isLineWarp"}})],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.TreeTable.loading,expression:"TreeTable.loading"}],staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:e.TreeTable.data,"row-key":"id",border:"",lazy:"",load:e.loadChildNode,"default-expand-all":"","tree-props":e.TreeTable.defaultProps}},[e._l(e.listQuery.ColumnHeader,(function(t){return a("el-table-column",{key:t.field,attrs:{prop:t.field,"min-width":t.width,sortable:"","show-overflow-tooltip":!e.isLineWarp},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(" "+e._s(a.row[t.field])+" ")]}}],null,!0)})})),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.editClick(t.row)}}},[a("i",{staticClass:"el-icon-edit"}),e._v("修改")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.delClick(t.row,t.$index)}}},[a("i",{staticClass:"el-icon-delete"}),e._v("删除")])]}}])})],2),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{visible:e.dialog.dialogVisible,title:e.dialog.dialogTitle,"close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.dialog,"dialogVisible",t)}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dialog.ruleFormLoading,expression:"dialog.ruleFormLoading"}],ref:"ruleForm",staticStyle:{"margin-right":"28px"},attrs:{size:"small",model:e.formcol,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"部门名称",prop:"name"}},[a("el-input",{model:{value:e.formcol.name,callback:function(t){e.$set(e.formcol,"name",t)},expression:"formcol.name"}})],1),a("el-form-item",{attrs:{label:"上级部门",prop:"parentpath"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{clearable:"",options:e.orgSelectList,props:{expandTrigger:"hover",checkStrictly:!0}},model:{value:e.formcol.parentpath,callback:function(t){e.$set(e.formcol,"parentpath",t)},expression:"formcol.parentpath"}})],1),a("el-form-item",{attrs:{label:"说明",prop:"notes"}},[a("el-input",{attrs:{type:"textarea",rows:"6"},model:{value:e.formcol.notes,callback:function(t){e.$set(e.formcol,"notes",t)},expression:"formcol.notes"}})],1),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-input",{model:{value:e.formcol.status,callback:function(t){e.$set(e.formcol,"status",t)},expression:"formcol.status"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:e.dialog.btnSavaLoading},on:{click:e.AddSubmit}},[e._v("保存")]),a("el-button",{on:{click:function(t){e.dialog.dialogVisible=!1}}},[e._v("取消")])],1)],1)],1)],1)},i=[],o=(a("a15b"),a("d81d"),a("ac1f"),a("1276"),a("96cf"),a("1da1")),n=a("b775"),l={GetTreeDataListById:function(e){return Object(n["a"])({url:"/object/ObjectTree/GetTreeDataListById",method:"get",params:{objectid:e}})}},s={components:{},data:function(){return{isLineWarp:!1,objectid:0,TreeTable:{data:[],defaultProps:{children:"children",hasChildren:"haschildren"},loading:!1},isAdd:!1,formcol:{id:0,name:"",notes:"",status:"",parentpath:[]},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}]},dialog:{ruleFormLoading:!1,dialogVisible:!1,btnSavaLoading:!1,dialogTitle:"添加部门"},orgSelectList:[]}},created:function(){this.objectid=this.$route.params.id,document.title=this.$route.query.title+"数据",this.fetchData()},methods:{loadChildNode:function(e,t,a){},AddSubmit:function(){var e=this;this.$refs.ruleForm.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=19;break}if(e.formcol.parentpath&&(e.formcol.parentpath=e.formcol.parentpath.join("-")),e.dialog.btnSavaLoading=!0,!e.isAdd){t.next=9;break}return t.next=6,l.insertData(e.formcol);case 6:r=t.sent,t.next=12;break;case 9:return t.next=11,l.updateData(e.formcol);case 11:r=t.sent;case 12:e.formcol.parentpath&&(e.formcol.parentpath=e.formcol.parentpath.split("-")),e.$message.success(r.msg),e.fetchData(),e.dialog.btnSavaLoading=!1,e.dialog.dialogVisible=!1,t.next=20;break;case 19:return t.abrupt("return",!1);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},editClick:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.dialog.dialogVisible=!0,t.dialog.btnSavaLoading=!1,t.isAdd=!1,t.dialog.ruleFormLoading=!0,t.dialog.dialogTitle="修改数据",a.next=7,l.getDataById(e.id);case 7:r=a.sent,t.formcol=r.data,t.formcol.parentpath&&(t.formcol.parentpath=t.formcol.parentpath.split("-").map((function(e){return+e}))),t.dialog.ruleFormLoading=!1;case 11:case"end":return a.stop()}}),a)})))()},delClick:function(e){var t=this;this.$confirm("确定要删除此行数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){l.deleteById(e.id).then((function(e){t.fetchData(),t.$message.success(e.msg)})).catch((function(e){t.$message.error("删除失败"+e.msg)}))}))},fetchData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.TreeTable.loading=!0,t.next=3,l.getTreeDataListById(e.objectid);case 3:a=t.sent,e.TreeTable.data=a.data,e.TreeTable.loading=!1;case 6:case"end":return t.stop()}}),t)})))()},addDialogOpen:function(){this.isAdd=!0,this.dialog.dialogTitle="添加新数据",this.formcol={id:0,name:"",notes:"",status:"",parentpath:[]},this.dialog.dialogVisible=!0}}},c=s,d=(a("e60d"),a("45d2"),a("2877")),u=Object(d["a"])(c,r,i,!1,null,"10ce5ebb",null);t["default"]=u.exports},a15b:function(e,t,a){"use strict";var r=a("23e7"),i=a("44ad"),o=a("fc6a"),n=a("a640"),l=[].join,s=i!=Object,c=n("join",",");r({target:"Array",proto:!0,forced:s||!c},{join:function(e){return l.call(o(this),void 0===e?",":e)}})},a49c:function(e,t,a){},d81d:function(e,t,a){"use strict";var r=a("23e7"),i=a("b727").map,o=a("1dde"),n=a("ae40"),l=o("map"),s=n("map");r({target:"Array",proto:!0,forced:!l||!s},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},e60d:function(e,t,a){"use strict";var r=a("a49c"),i=a.n(r);i.a}}]);