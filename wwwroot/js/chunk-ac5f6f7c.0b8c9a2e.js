(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ac5f6f7c"],{"25f0":function(t,e,a){"use strict";var i=a("6eeb"),n=a("825a"),r=a("d039"),o=a("ad6d"),s="toString",d=RegExp.prototype,l=d[s],c=r((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),u=l.name!=s;(c||u)&&i(RegExp.prototype,s,(function(){var t=n(this),e=String(t.source),a=t.flags,i=String(void 0===a&&t instanceof RegExp&&!("flags"in d)?o.call(t):a);return"/"+e+"/"+i}),{unsafe:!0})},"3a12":function(t,e,a){},"4b87":function(t,e,a){},"4d63":function(t,e,a){var i=a("83ab"),n=a("da84"),r=a("94ca"),o=a("7156"),s=a("9bf2").f,d=a("241c").f,l=a("44e7"),c=a("ad6d"),u=a("9f7f"),p=a("6eeb"),f=a("d039"),m=a("69f3").set,h=a("2626"),v=a("b622"),g=v("match"),y=n.RegExp,b=y.prototype,w=/a/g,_=/a/g,k=new y(w)!==w,x=u.UNSUPPORTED_Y,R=i&&r("RegExp",!k||x||f((function(){return _[g]=!1,y(w)!=w||y(_)==_||"/a/i"!=y(w,"i")})));if(R){var C=function(t,e){var a,i=this instanceof C,n=l(t),r=void 0===e;if(!i&&n&&t.constructor===C&&r)return t;k?n&&!r&&(t=t.source):t instanceof C&&(r&&(e=c.call(t)),t=t.source),x&&(a=!!e&&e.indexOf("y")>-1,a&&(e=e.replace(/y/g,"")));var s=o(k?new y(t,e):y(t,e),i?this:b,C);return x&&a&&m(s,{sticky:a}),s},T=function(t){t in C||s(C,t,{configurable:!0,get:function(){return y[t]},set:function(e){y[t]=e}})},E=d(y),$=0;while(E.length>$)T(E[$++]);b.constructor=C,C.prototype=b,p(n,"RegExp",C)}h("RegExp")},"54da":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"plan"},[a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"sty_title"},[t._v("工单号:")])]),a("el-col",{attrs:{span:4}},[a("el-input",{ref:"orderno",staticClass:"sty_field",attrs:{placeholder:"请输入工单号",size:"mini"},on:{change:t.changeOrderNo},model:{value:t.orderno,callback:function(e){t.orderno=e},expression:"orderno"}})],1),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"sty_title"},[t._v("部门号:")])]),a("el-col",{attrs:{span:5}},[a("el-input",{ref:"dept",staticClass:"sty_field",attrs:{placeholder:"请输入发布部门号",size:"mini"},on:{change:t.changeDepartId},model:{value:t.departmentid,callback:function(e){t.departmentid=e},expression:"departmentid"}})],1),a("el-col",{attrs:{span:4}},[a("el-button",{ref:"save",attrs:{id:"btn_save",type:"primary",size:"mini"},on:{click:t.saveAudit}},[t._v("保 存")])],1)],1),a("el-row",{staticClass:"partinfo"},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"sty_info"},[t._v(" 工号："+t._s(t.workno)+" ")])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"sty_info"},[t._v(" 图号："+t._s(t.itemnumber)+" ")])]),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"sty_info"},[t._v(" 名称："+t._s(t.itemname)+" ")])]),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"sty_info"},[t._v(" 货位："+t._s(t.location)+" ")])]),a("el-col",{attrs:{span:2}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isKeyPart,expression:"isKeyPart"}],staticStyle:{color:"yellow"}},[t._v(" 关键件：★ ")])]),a("el-col",{attrs:{span:2}},[a("div",{directives:[{name:"show",rawName:"v-show",value:""!=t.CooperationType,expression:"CooperationType !=''"}],staticStyle:{color:"yellow"}},[t._v(" "+t._s(t.CooperationType)+" ")])]),a("el-col",{attrs:{span:4}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.itp,expression:"itp"}]},[a("el-date-picker",{attrs:{type:"date",placeholder:"ITP确认日期",size:"mini"},model:{value:t.itpdate,callback:function(e){t.itpdate=e},expression:"itpdate"}})],1)])],1),a("elx-editable",{ref:"elxEditable",attrs:{config:{render:"scroll"},data:t.tableData.data,height:500,border:"","highlight-current-row":""},on:{"update:data":function(e){return t.$set(t.tableData,"data",e)}}},[t._l(t.tableData.ColumnHeader,(function(t){return[a("elx-editable-column",{key:t.field,attrs:{label:t.title,prop:t.field,"min-width":t.width,fixed:t.isfixed}})]}))],2)],1)},n=[],r=(a("4160"),a("c975"),a("b0c0"),a("4d63"),a("ac1f"),a("25f0"),a("159b"),a("b775")),o={saveissue:function(t){return Object(r["a"])({url:"/TransWork/Transwork/saveIssue",method:"post",data:t})},getordernoinfo:function(t){return Object(r["a"])({url:"/TransWork/Transwork/getOrdernoInfo",method:"get",params:{orderno:t}})},getdepartment:function(t){return Object(r["a"])({url:"/TransWork/Transwork/getDepartmentById",method:"get",params:{id:t}})},getIssueDepartmentList:function(){return Object(r["a"])({url:"/TransWork/Transwork/getIssueDepartmentList",method:"get"})}},s={components:{},data:function(){return{workno:"",orderno:"",itemnumber:"",itemname:"",department:"",departmentid:"",departmentidReal:"",departmentshow:!1,isKeyPart:!1,CooperationType:"",itp:!1,itpdate:"",isFirst:!1,quantity:0,ordernoRight:!1,deptRight:!1,location:"",listLoading:!1,tableData:{data:[],ColumnHeader:[{field:"orderno",title:"工单号",width:"80"},{field:"itemnumber",title:"图号",width:"80"},{field:"itemname",title:"名称",width:"80"},{field:"employname",title:"转出人",width:"80"},{field:"quantity",title:"数量",width:"80"},{field:"destination",title:"接收单位",width:"80"}]},deptList:[]}},computed:{},methods:{changeOrderNo:function(t){var e=this;""!=t&&(t=t.toUpperCase(),o.getordernoinfo(t).then((function(t){var a=t.data;if(e.workno=a.workno,e.itemnumber=a.itemno,e.itemname=a.name,e.isKeyPart="1"==a.iskeyworksegment,e.itp="Y"==a.ITP,e.location=a.location,e.isFirst=a.isFirst,"0"==e.isFirst)return e.$message.error("本工单已经发布过， 不能重复发布 ！ "),void(e.orderno="");e.quantity=a.quantity,e.ordernoRight=!0,e.$refs.dept.$el.querySelector("input").focus()})))},changeDepartId:function(t){var e=this;if(""!=t){var a=new RegExp(/^[0-9A-Z]{32}$/);a.test(t)?o.getdepartment(t).then((function(a){e.departmentshow=a.code,a.code?(a.data.LABEL.indexOf("库")>=0&&e.$message.error("发布的工单不能直接入库 ！"),e.departmentidReal=t,e.departmentid=a.data.LABEL,e.deptRight=!0,document.querySelector("#btn_save").focus()):e.$message.error("错误的编码，请重新扫码 ！")})):(this.departmentidReal="",this.departmentid="",this.$message.error("必须输入目的单位信息 ！"))}},saveAudit:function(){var t=this;if(""!=this.departmentidReal)if(this.itp&&""==this.itpdate)this.$message.error("必须输入 ITP 的确认日期 ");else{this.ordernoRight=!1,this.deptRight=!1;var e={orderno:this.orderno,userid:"",date:"",destination:this.departmentidReal,quantity:this.quantity,isFirst:this.isFirst};this.listLoading=!0,o.saveissue(e).then((function(e){var a=e.data;t.tableData.data.push({orderno:t.orderno,itemnumber:t.itemnumber,itemname:t.itemname,quantity:t.quantity,employname:a,destination:t.departmentid}),t.workno="",t.orderno="",t.itpdate="",t.destination="",t.itp=!1,t.department="",t.itemnumber="",t.itemname="",t.isKeyPart=!1,t.CooperationType="",t.departmentid="",t.departmentidReal=""})),this.listLoading=!1,this.$refs.orderno.$el.querySelector("input").focus()}else this.$message.error("必须指定目的单位  ")}},mounted:function(){var t=this;this.$refs.orderno.$el.querySelector("input").focus(),o.getIssueDepartmentList().then((function(e){var a=e.data;a.forEach((function(e){t.deptList.push({value:e.ID,label:e.LABEL})}))}))},created:function(){}},d=s,l=(a("5e95"),a("d9e2"),a("2877")),c=Object(l["a"])(d,i,n,!1,null,"20237964",null);e["default"]=c.exports},"5e95":function(t,e,a){"use strict";var i=a("3a12"),n=a.n(i);n.a},7156:function(t,e,a){var i=a("861d"),n=a("d2bb");t.exports=function(t,e,a){var r,o;return n&&"function"==typeof(r=e.constructor)&&r!==a&&i(o=r.prototype)&&o!==a.prototype&&n(t,o),t}},d9e2:function(t,e,a){"use strict";var i=a("4b87"),n=a.n(i);n.a}}]);